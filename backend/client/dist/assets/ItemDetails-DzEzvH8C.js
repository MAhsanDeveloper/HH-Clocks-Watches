import{e as j,u as y,r as l,j as e,f as N,F as v,b as w,L as I,a as S,V as p}from"./index-Dyj1s5of.js";const c="https://hh-clocks-watches-production.up.railway.app",$=()=>{const{id:n}=j(),u=y(),[t,g]=l.useState(null),[x,m]=l.useState(""),[r,h]=l.useState(0);l.useEffect(()=>{(async()=>{try{const s=await S.get(`${c}/api/shop/${n}`);g(s.data),m(`${c}${s.data.mainImage}`)}catch(s){console.error("Failed to fetch item",s),p.error("Failed to load item details")}})(),b()},[n]);const b=()=>{const s=(JSON.parse(localStorage.getItem("cartItems"))||[]).find(i=>i._id===n);h(s?s.quantity:0)},o=a=>{const s=JSON.parse(localStorage.getItem("cartItems"))||[],i=s.findIndex(d=>d._id===n),f=t.hasDiscount?Math.round(t.price-t.price*t.discountRate/100):t.price;i!==-1?(s[i].quantity+=a,s[i].quantity<=0&&s.splice(i,1)):a>0&&s.push({...t,quantity:1,price:f,image:`${c}${t.mainImage}`}),localStorage.setItem("cartItems",JSON.stringify(s)),h(d=>Math.max(d+a,0)),p.success(a>0?"Item added to cart":"Item removed from cart")};return t?e.jsxs("div",{className:"min-h-screen bg-base-100 text-white px-4 sm:px-8 py-6",children:[e.jsx("div",{className:"mb-4 sm:hidden",children:e.jsxs("button",{onClick:()=>u(-1),className:"flex items-center text-sm text-white hover:text-primary transition",children:[e.jsx(N,{className:"mr-2"})," Back"]})}),e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{children:[e.jsx("img",{src:x,alt:t.name,className:"w-full max-h-[400px] object-contain rounded-xl shadow-md border border-gray-700"}),e.jsx("div",{className:"flex flex-wrap gap-3 mt-4",children:[t.mainImage,...t.previewImages||[]].slice(0,3).map((a,s)=>e.jsx("img",{src:`${c}${a}`,alt:`preview-${s}`,onClick:()=>m(`${c}${a}`),className:`w-20 h-20 rounded-lg object-cover border-2 cursor-pointer transition-all duration-200 ${x===`${c}${a}`?"border-primary ring-2 ring-primary":"border-gray-600"}`},s))})]}),e.jsxs("div",{className:"flex flex-col justify-between space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold tracking-tight",children:t.name}),e.jsx("p",{className:"text-base text-black leading-relaxed",children:t.description}),e.jsx("p",{className:`text-sm font-semibold ${t.inStock?"text-green-400":"text-red-500"}`,children:t.inStock?`${t.available} item(s) available`:"Out of Stock"}),e.jsx("div",{className:"mt-2 space-y-1",children:t.hasDiscount?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl text-red-500 line-through",children:["Rs ",t.price.toLocaleString()]}),e.jsxs("p",{className:"text-3xl text-green-400 font-extrabold",children:["Rs"," ",Math.round(t.price-t.price*t.discountRate/100).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-green-300",children:["Save ",t.discountRate,"% instantly!"]})]}):e.jsxs("p",{className:"text-3xl text-yellow-400 font-bold",children:["Rs ",t.price.toLocaleString(),e.jsx("div",{className:"text-sm w-fit rounded text-green-500 text-left font-semibold z-10",children:"Free Delivery"})]})})]}),t.inStock?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>o(-1),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg",disabled:r<=0,children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>o(1),className:"bg-green-600 hover:bg-green-500 cursor-pointer text-white px-4 py-2 rounded-lg",disabled:r>=t.available,children:"Add to Cart"}),e.jsx("button",{onClick:()=>o(1),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg",disabled:r>=t.available,children:e.jsx(w,{})}),e.jsx("span",{className:"text-xl font-bold text-white w-12 text-center",children:r})]}),r>0&&e.jsxs("div",{className:"text-sm text-green-300 text-center space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-green-600",children:r})," ","item(s) added to cart"]}),e.jsx(I,{to:"/cart",className:"inline-block text-center justify-center cursor-pointer bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg mt-1 text-sm font-semibold",children:"Go to Cart"})]})]}):e.jsx("button",{disabled:!0,className:"w-full bg-red-600 text-white font-semibold px-6 py-3 rounded-xl cursor-not-allowed",children:"Out of Stock"})]})]})]}):e.jsx("div",{className:"text-white text-center mt-16",children:"Loading..."})};export{$ as default};
